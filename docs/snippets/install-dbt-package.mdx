import { Accordion } from "@/components/accordion";
import { TipInfo } from "@/components/tipinfo";

## How to install Elementary dbt package?

<Example>
  <iframe
    src="https://www.loom.com/embed/5cf1aaa0708f43a993f8a2945473c7ac"
    frameborder="0"
    webkitallowfullscreen
    mozallowfullscreen
    allowfullscreen
    class="w-full h-64"
  ></iframe>
</Example>

### 1. Add elementary to `packages.yml`

Add the following to your `packages.yml` file (if missing, create it where `dbt_project.yml` is):

```yml packages.yml
packages:
  - package: elementary-data/elementary
    version: 0.4.7
    ## compatible with Elementary CLI version 0.4.6
    ## see docs: https://docs.elementary-data.com/
```

### 2. Add to your `dbt_project.yml`

<TipInfo>
  This means Elementary will use `your_schema_elementary` as its schema.
</TipInfo>

```yml dbt_project.yml
models:
  ## elementary models will be created in the schema '<your_schema>_elementary'
  ## see docs: https://docs.elementary-data.com/
  elementary:
    +schema: "elementary"
```

<Accordion title="Important: Materialization config">

For elementary to work, it needs to create some of the models as incremental tables. Make sure that there are no global materialization configurations that affect elementary, such as:

```yml dbt_project.yml
materialized: "{{ 'table' if target.name == 'prod-cloud' else 'view' }}"
```

Make sure to place the 'elementary' configuration under the models key, and other configs under your project name.

Example:

```yml dbt_project.yml
models:
  my_project:
    materialized: "{{ 'table' if target.name == 'prod-cloud' else 'view' }}"

  elementary:
    +schema: "elementary"
```

</Accordion>

### 3. Import the package

```shell Terminal
dbt deps
```

### 4. Run to create the package models

```shell Terminal
dbt run --select elementary
```

This will mostly create empty tables, that will be updated with artifacts, metrics and test results in your future dbt executions.
